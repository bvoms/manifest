<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üî• NewMe ‚Äî –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</title>

<style>
:root{
  --bg:#0e0e11;
  --card:#16161d;
  --text:#eaeaf0;
  --muted:#9a9aa3;
  --accent:#5cff9d;
  --warn:#ffb84d;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:20px;
  text-align:center;
  font-size:24px;
  font-weight:700;
}
section{
  margin:16px;
  padding:16px;
  background:var(--card);
  border-radius:12px;
}
h2{margin-top:0}
.small{font-size:13px;color:var(--muted)}
.progress{
  height:10px;
  background:#000;
  border-radius:6px;
  overflow:hidden;
  margin-top:6px;
}
.fill{
  height:100%;
  width:0%;
  background:var(--accent);
}
label{
  display:flex;
  gap:10px;
  margin:6px 0;
  align-items:center;
}
input[type=checkbox]{accent-color:var(--accent)}
button{
  width:100%;
  padding:10px;
  margin-top:10px;
  background:transparent;
  border:1px solid var(--accent);
  color:var(--accent);
  border-radius:8px;
}
button:hover{background:var(--accent);color:#000}
pre{
  white-space:pre-wrap;
  font-family:inherit;
  font-size:14px;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
@media(max-width:600px){
  .grid{grid-template-columns:1fr}
}
</style>
</head>

<body>

<header>üî• NewMe ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</header>

<section>
  <div class="small" id="dayInfo"></div>
  <div class="small" id="quote"></div>

  <div class="small">–ö–∞–ª–æ—Ä–∏–∏</div>
  <div class="progress"><div class="fill" id="calFill"></div></div>
  <div class="small" id="calText"></div>

  <div class="small">–ë–µ–ª–æ–∫</div>
  <div class="progress"><div class="fill" id="protFill"></div></div>
  <div class="small" id="protText"></div>

  <div class="small">–£–≥–ª–µ–≤–æ–¥—ã</div>
  <div class="progress"><div class="fill" id="carbFill"></div></div>
  <div class="small" id="carbText"></div>
</section>

<section>
<h2>üèãÔ∏è –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>
<div id="workout"></div>
</section>

<section>
<h2>üçΩÔ∏è –ü–∏—Ç–∞–Ω–∏–µ (–≥–æ—Ç–æ–≤–∞—è –µ–¥–∞)</h2>
<div id="meals"></div>
</section>

<section>
<h2>üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</h2>
<button onclick="enableReminders()">–í–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</button>
<div class="small">08:00 ¬∑ 11:00 ¬∑ 14:00 ¬∑ 17:00 ¬∑ 19:00 ¬∑ 21:00</div>
</section>

<section>
<h2>üìä –ù–µ–¥–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
<div id="weekStats" class="small"></div>
</section>

<script>
// ===== –î–ï–ù–¨ –¶–ò–ö–õ–ê =====
const start = localStorage.start || new Date().toISOString();
localStorage.start = start;
const day = Math.floor((Date.now()-new Date(start))/86400000)+1;
dayInfo.innerText = `–î–µ–Ω—å ${day} | –¶–∏–∫–ª ${(day-1)%7+1}`;

// ===== –ú–û–¢–ò–í–ê–¶–ò–Ø =====
const quotes=[
  "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Ä–µ—à–∞–µ—Ç",
  "–†–æ—Å—Ç ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞",
  "–¢—ã —Å—Ç—Ä–æ–∏—à—å —Ç–µ–ª–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",
  "–ü–∞–º–ø –≤—Ä–µ–º–µ–Ω–Ω—ã–π, –ø—Ä–∏–≤—ã—á–∫–∏ –Ω–∞–≤—Å–µ–≥–¥–∞"
];
const qKey="q"+day;
if(!localStorage[qKey]) localStorage[qKey]=quotes[Math.random()*quotes.length|0];
quote.innerText="üß† "+localStorage[qKey];

// ===== –¢–†–ï–ù–ò–†–û–í–ö–ò =====
const workouts=[
{t:"–ì—Ä—É–¥—å + –¢—Ä–∏—Ü–µ–ø—Å",x:`–û—Ç–∂–∏–º–∞–Ω–∏—è 3√ó15‚Äì20 (–ø–æ—Å–ª. –æ—Ç–∫–∞–∑)
–û—Ç–∂–∏–º–∞–Ω–∏—è —Å –Ω–æ–≥–∞–º–∏ 3√ó12‚Äì15
–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è 2√ó–º–∞–∫—Å
–£–∑–∫–∏–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è 3√ó12‚Äì15
–û–±—Ä–∞—Ç–Ω—ã–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è 3√ó–º–∞–∫—Å
–§–∏–Ω–∏—à–µ—Ä 30/15 √ó4`},
{t:"–°–ø–∏–Ω–∞ + –ë–∏—Ü–µ–ø—Å",x:`–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è 4√ó–º–∞–∫—Å
–¢—è–≥–∞ –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞ 4√ó12‚Äì15
–°—É–ø–µ—Ä–º–µ–Ω 3√ó20
–°–≥–∏–±–∞–Ω–∏—è —Ä—É–∫ 4√ó15‚Äì20
–°—Ç–∞—Ç–∏–∫–∞ 90¬∞ √ó2`},
{t:"–ù–æ–≥–∏",x:`–ü—Ä–∏—Å–µ–¥ 5√ó20 (–ø–æ—Å–ª. –æ—Ç–∫–∞–∑)
–í—ã–ø–∞–¥—ã 4√ó12/–Ω–æ–≥–∞
–ü–∞—É–∑–∞-–ø—Ä–∏—Å–µ–¥ 3√ó10
–Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç 4√ó20
–°—Ç–∞—Ç–∏–∫–∞ √ó2`},
{t:"–ü–ª–µ—á–∏ + –ü—Ä–µ—Å—Å",x:`–û—Ç–∂–∏–º–∞–Ω–∏—è —É–≥–æ–ª–∫–æ–º 4√ó–º–∞–∫—Å
–†–∞–∑–≤–µ–¥–µ–Ω–∏—è 4√ó20
–ü–æ–¥—ä—ë–º—ã –Ω–æ–≥ 4√ó–º–∞–∫—Å
–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è 3√ó30
–ü–ª–∞–Ω–∫–∞ 3√ó–º–∞–∫—Å`},
{t:"–§—É–ª–ª–±–æ–¥–∏",x:`–û—Ç–∂–∏–º–∞–Ω–∏—è 3√ó–º–∞–∫—Å
–ü—Ä–∏—Å–µ–¥ 3√ó25
–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è 3√ó–º–∞–∫—Å
–ü–ª–∞–Ω–∫–∞ 3√ó1 –º–∏–Ω`},
{t:"–û—Ç–¥—ã—Ö",x:"–ü—Ä–æ–≥—É–ª–∫–∞ ¬∑ —Ä–∞—Å—Ç—è–∂–∫–∞ ¬∑ —Å–æ–Ω"},
{t:"–û—Ç–¥—ã—Ö",x:"–ü—Ä–æ–≥—É–ª–∫–∞ ¬∑ —Ä–∞—Å—Ç—è–∂–∫–∞ ¬∑ —Å–æ–Ω"}
];
const todayWorkout=workouts[(day-1)%7];
workout.innerHTML=`<strong>${todayWorkout.t}</strong><pre>${todayWorkout.x}</pre>`;

// ===== –ü–ò–¢–ê–ù–ò–ï =====
const isTrainDay=(day-1)%7<5;

const TARGETS=isTrainDay
? {cal:3200,prot:130,carb:420}
: {cal:2800,prot:130,carb:300};

const mealPlan=isTrainDay?[
{n:"–ó–∞–≤—Ç—Ä–∞–∫",c:700,p:30,u:90},
{n:"–ü–µ—Ä–µ–∫—É—Å",c:500,p:20,u:70},
{n:"–û–±–µ–¥",c:800,p:55,u:100},
{n:"–ü–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π",c:450,p:20,u:60},
{n:"–ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",c:500,p:25,u:80},
{n:"–£–∂–∏–Ω",c:600,p:45,u:70}
]:[
{n:"–ó–∞–≤—Ç—Ä–∞–∫",c:650,p:30,u:80},
{n:"–ü–µ—Ä–µ–∫—É—Å",c:450,p:20,u:60},
{n:"–û–±–µ–¥",c:750,p:55,u:90},
{n:"–£–∂–∏–Ω",c:700,p:45,u:70}
];

let total={cal:0,prot:0,carb:0};
const mealsBox=document.getElementById("meals");

mealPlan.forEach((m,i)=>{
  const id=`meal${day}_${i}`;
  const checked=localStorage[id]==="1";
  if(checked){
    total.cal+=m.c;
    total.prot+=m.p;
    total.carb+=m.u;
  }
  mealsBox.innerHTML+=`
  <label>
    <input type="checkbox" ${checked?"checked":""}
      onchange="toggleMeal('${id}',${m.c},${m.p},${m.u},this.checked)">
    ${m.n} ‚Äî ${m.c} –∫–∫–∞–ª | –ë ${m.p} –≥ | –£ ${m.u} –≥
  </label>`;
});

function toggleMeal(id,c,p,u,on){
  localStorage[id]=on?"1":"0";
  total.cal+=on?c:-c;
  total.prot+=on?p:-p;
  total.carb+=on?u:-u;
  renderTotals();
}

function renderTotals(){
  calFill.style.width=Math.min(100,total.cal/TARGETS.cal*100)+"%";
  protFill.style.width=Math.min(100,total.prot/TARGETS.prot*100)+"%";
  carbFill.style.width=Math.min(100,total.carb/TARGETS.carb*100)+"%";

  calText.innerText=`${total.cal} / ${TARGETS.cal} –∫–∫–∞–ª`;
  protText.innerText=`${total.prot} / ${TARGETS.prot} –≥ –±–µ–ª–∫–∞`;
  carbText.innerText=`${total.carb} / ${TARGETS.carb} –≥ —É–≥–ª–µ–≤–æ–¥–æ–≤`;
}
renderTotals();

// ===== –ù–ï–î–ï–õ–¨–ù–ê–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ê =====
function weekStats(){
  let days=0,c=0,p=0,u=0;
  for(let d=day-6;d<=day;d++){
    mealPlan.forEach((_,i)=>{
      if(localStorage[`meal${d}_${i}`]==="1"){
        c+=mealPlan[i]?.c||0;
        p+=mealPlan[i]?.p||0;
        u+=mealPlan[i]?.u||0;
      }
    });
    days++;
  }
  weekStats.innerText=
    `–°—Ä–µ–¥–Ω–µ–µ –∑–∞ 7 –¥–Ω–µ–π:
–ö–∫–∞–ª ~${Math.round(c/days)}
–ë–µ–ª–æ–∫ ~${Math.round(p/days)} –≥
–£–≥–ª–∏ ~${Math.round(u/days)} –≥`;
}
weekStats();

// ===== –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–Ø =====
function enableReminders(){
  if(Notification.permission!=="granted"){
    Notification.requestPermission();
  }
  const times=["08:00","11:00","14:00","17:00","19:00","21:00"];
  setInterval(()=>{
    const now=new Date();
    const t=now.toTimeString().slice(0,5);
    if(times.includes(t)){
      new Notification("üçΩÔ∏è –ü–û–†–ê –ï–°–¢–¨",{body:"–ï–¥–∞ = —Ä–æ—Å—Ç"});
    }
  },60000);
}
</script>

</body>
</html>
