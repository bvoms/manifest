<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üî• NewMe ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</title>

<style>
:root{
  --bg:#0e0e11;
  --card:#16161d;
  --text:#eaeaf0;
  --muted:#9a9aa3;
  --accent:#5cff9d;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,sans-serif;background:var(--bg);color:var(--text)}
header{padding:20px;text-align:center;font-size:24px;font-weight:700}
section{margin:16px;padding:16px;background:var(--card);border-radius:12px}
h2{margin-top:0}
.small{font-size:13px;color:var(--muted)}
.progress{height:10px;background:#000;border-radius:6px;overflow:hidden}
.fill{height:100%;background:var(--accent);width:0%}
label{display:flex;gap:10px;margin:6px 0;align-items:flex-start}
input{accent-color:var(--accent)}
button{
  padding:8px 12px;margin:4px 4px 0 0;
  background:transparent;border:1px solid var(--accent);
  color:var(--accent);border-radius:8px;
}
button.active{background:var(--accent);color:#000}
pre{white-space:pre-wrap;font-family:inherit;font-size:14px;line-height:1.4}
.meal-title{font-weight:600}
</style>
</head>

<body>

<header>üî• NewMe ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</header>

<section>
  <div class="small" id="dayInfo"></div>
  <div class="small" id="quote"></div>

  <div class="small">–ö–∞–ª–æ—Ä–∏–∏</div>
  <div class="progress"><div class="fill" id="calFill"></div></div>
  <div class="small" id="calText"></div>

  <div class="small">–ë–µ–ª–æ–∫</div>
  <div class="progress"><div class="fill" id="protFill"></div></div>
  <div class="small" id="protText"></div>

  <div class="small">–£–≥–ª–µ–≤–æ–¥—ã</div>
  <div class="progress"><div class="fill" id="carbFill"></div></div>
  <div class="small" id="carbText"></div>
</section>

<section>
<h2>üèãÔ∏è –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>
<div id="workout"></div>
</section>

<section>
<h2>üçö –í—ã–±–æ—Ä –≥–∞—Ä–Ω–∏—Ä–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
<button id="btn-rice" onclick="setSide('rice')">–†–∏—Å</button>
<button id="btn-pasta" onclick="setSide('pasta')">–ú–∞–∫–∞—Ä–æ–Ω—ã</button>
<button id="btn-buckwheat" onclick="setSide('buckwheat')">–ì—Ä–µ—á–∫–∞</button>
</section>

<section>
<h2>üçΩÔ∏è –ü–∏—Ç–∞–Ω–∏–µ (–≥–æ—Ç–æ–≤–∞—è –µ–¥–∞)</h2>
<div id="meals"></div>
</section>

<script>
// ===== –î–ï–ù–¨ =====
const start = localStorage.start || new Date().toISOString();
localStorage.start = start;
const day = Math.floor((Date.now()-new Date(start))/86400000)+1;
dayInfo.innerText = `–î–µ–Ω—å ${day}`;

// ===== –ú–û–¢–ò–í–ê–¶–ò–Ø =====
const quotes=[
  "–°–ª–∞–±–æ—Å—Ç—å ‚Äî —ç—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞",
  "–ï–¥–∞ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ = —Ä–æ—Å—Ç",
  "–°–µ–≥–æ–¥–Ω—è —Ç—ã —Å—Ç—Ä–æ–∏—à—å —Ç–µ–ª–æ",
  "–°–∏—Å—Ç–µ–º–∞ —Å–∏–ª—å–Ω–µ–µ –º–æ—Ç–∏–≤–∞—Ü–∏–∏"
];
const qKey="q"+day;
if(!localStorage[qKey]) localStorage[qKey]=quotes[Math.floor(Math.random()*quotes.length)];
quote.innerText="üß† "+localStorage[qKey];

// ===== –¢–†–ï–ù–ò–†–û–í–ö–ò =====
const workouts=[
{
  title:"–ì—Ä—É–¥—å + –¢—Ä–∏—Ü–µ–ø—Å",
  text:`–û—Ç–∂–∏–º–∞–Ω–∏—è ‚Äî 3√ó15‚Äì20, 4-–π –¥–æ –æ—Ç–∫–∞–∑–∞
–û—Ç–∂–∏–º–∞–Ω–∏—è —Å –Ω–æ–≥–∞–º–∏ ‚Äî 3√ó12‚Äì15
–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è ‚Äî 2√ó–º–∞–∫—Å

–£–∑–∫–∏–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è ‚Äî 3√ó12‚Äì15
–û–±—Ä–∞—Ç–Ω—ã–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è ‚Äî 3√ó–º–∞–∫—Å

–§–∏–Ω–∏—à–µ—Ä: 30/15 √ó 4`
},
{
  title:"–°–ø–∏–Ω–∞ + –ë–∏—Ü–µ–ø—Å",
  text:`–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è ‚Äî 4√ó–º–∞–∫—Å
–¢—è–≥–∞ –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞ ‚Äî 4√ó12‚Äì15
–°—É–ø–µ—Ä–º–µ–Ω ‚Äî 3√ó20

–°–≥–∏–±–∞–Ω–∏—è —Ä—É–∫ ‚Äî 4√ó15‚Äì20
–°—Ç–∞—Ç–∏–∫–∞ 90¬∞ ‚Äî 2√ó–º–∞–∫—Å`
},
{
  title:"–ù–æ–≥–∏",
  text:`–ü—Ä–∏—Å–µ–¥ ‚Äî 5√ó20 (–ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–∫–∞–∑)
–í—ã–ø–∞–¥—ã ‚Äî 4√ó12/–Ω–æ–≥–∞
–ü—Ä–∏—Å–µ–¥ —Å –ø–∞—É–∑–æ–π ‚Äî 3√ó10
–Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç ‚Äî 4√ó20

–°—Ç–∞—Ç–∏–∫–∞ —É —Å—Ç–µ–Ω—ã √ó 2`
},
{
  title:"–ü–ª–µ—á–∏ + –ü—Ä–µ—Å—Å",
  text:`–û—Ç–∂–∏–º–∞–Ω–∏—è —É–≥–æ–ª–∫–æ–º ‚Äî 4√ó–º–∞–∫—Å
–†–∞–∑–≤–µ–¥–µ–Ω–∏—è ‚Äî 4√ó20

–ü–æ–¥—ä—ë–º—ã –Ω–æ–≥ ‚Äî 4√ó–º–∞–∫—Å
–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è ‚Äî 3√ó30
–ü–ª–∞–Ω–∫–∞ ‚Äî 3√ó–º–∞–∫—Å`
},
{
  title:"–§—É–ª–ª–±–æ–¥–∏",
  text:`–û—Ç–∂–∏–º–∞–Ω–∏—è ‚Äî 3√ó–º–∞–∫—Å
–ü—Ä–∏—Å–µ–¥ ‚Äî 3√ó25
–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è ‚Äî 3√ó–º–∞–∫—Å
–ü–ª–∞–Ω–∫–∞ ‚Äî 3√ó1 –º–∏–Ω`
},
{title:"–û—Ç–¥—ã—Ö",text:"–ü—Ä–æ–≥—É–ª–∫–∞, —Ä–∞—Å—Ç—è–∂–∫–∞, —Å–æ–Ω"},
{title:"–û—Ç–¥—ã—Ö",text:"–ü—Ä–æ–≥—É–ª–∫–∞, —Ä–∞—Å—Ç—è–∂–∫–∞, —Å–æ–Ω"}
];

const todayWorkout = workouts[(day-1)%7];
workout.innerHTML = `<strong>${todayWorkout.title}</strong><pre>${todayWorkout.text}</pre>`;

// ===== –ü–ò–¢–ê–ù–ò–ï =====
const isTrainDay = (day-1)%7 < 5;
const TARGETS = isTrainDay
? {cal:3200,prot:130,carb:420}
: {cal:2800,prot:130,carb:300};

// ===== –ì–ê–†–ù–ò–† =====
let side = localStorage.side || "rice";
const sides = {
  rice:"—Ä–∏—Å –≤–∞—Ä—ë–Ω—ã–π",
  pasta:"–º–∞–∫–∞—Ä–æ–Ω—ã –≤–∞—Ä—ë–Ω—ã–µ",
  buckwheat:"–≥—Ä–µ—á–∫–∞ –≤–∞—Ä—ë–Ω–∞—è"
};

function setSide(s){
  side=s;
  localStorage.side=s;
  renderButtons();
  renderMeals();
}

function renderButtons(){
  ["rice","pasta","buckwheat"].forEach(s=>{
    document.getElementById("btn-"+s).classList.toggle("active", side===s);
  });
}
renderButtons();

// ===== –ü–õ–ê–ù –ü–ò–¢–ê–ù–ò–Ø =====
function renderMeals(){
  let total={cal:0,prot:0,carb:0};
  meals.innerHTML="";

  const plan = isTrainDay ? [
    {n:"–ó–∞–≤—Ç—Ä–∞–∫",t:`${sides[side]} 300 –≥ + —è–π—Ü–∞ 4 —à—Ç`,c:700,p:30,u:90},
    {n:"–ü–µ—Ä–µ–∫—É—Å",t:`${sides[side]} 250 –≥ + —è–π—Ü–∞ 2 —à—Ç`,c:500,p:20,u:70},
    {n:"–û–±–µ–¥",t:`–ö—É—Ä–∏—Ü–∞ 180 –≥ + ${sides[side]} 350 –≥`,c:800,p:55,u:100},
    {n:"–ü–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π",t:`${sides[side]} 200 –≥ + —è–π—Ü–∞ 2 —à—Ç`,c:450,p:20,u:60},
    {n:"–ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",t:`–ì–µ–π–Ω–µ—Ä + –∫—Ä–µ–∞—Ç–∏–Ω`,c:500,p:25,u:80},
    {n:"–£–∂–∏–Ω",t:`–ö—É—Ä–∏—Ü–∞ 150 –≥ + ${sides[side]} 250 –≥`,c:600,p:45,u:70}
  ] : [
    {n:"–ó–∞–≤—Ç—Ä–∞–∫",t:`${sides[side]} 250 –≥ + —è–π—Ü–∞ 4 —à—Ç`,c:650,p:30,u:80},
    {n:"–ü–µ—Ä–µ–∫—É—Å",t:`${sides[side]} 200 –≥ + —è–π—Ü–∞ 2 —à—Ç`,c:450,p:20,u:60},
    {n:"–û–±–µ–¥",t:`–ö—É—Ä–∏—Ü–∞ 180 –≥ + ${sides[side]} 300 –≥`,c:750,p:55,u:90},
    {n:"–£–∂–∏–Ω",t:`–ö—É—Ä–∏—Ü–∞ 150 –≥ + ${sides[side]} 250 –≥`,c:700,p:45,u:70}
  ];

  plan.forEach((m,i)=>{
    const id=`meal_${day}_${i}`;
    const checked=localStorage[id]==="1";
    if(checked){total.cal+=m.c;total.prot+=m.p;total.carb+=m.u;}
    meals.innerHTML+=`
    <label>
      <input type="checkbox" ${checked?"checked":""}
        onchange="toggleMeal('${id}',${m.c},${m.p},${m.u},this.checked)">
      <div>
        <div class="meal-title">${m.n}</div>
        <div class="small">${m.t}</div>
        <div class="small">${m.c} –∫–∫–∞–ª ¬∑ –ë ${m.p} –≥ ¬∑ –£ ${m.u} –≥</div>
      </div>
    </label>`;
  });

  window.toggleMeal=function(id,c,p,u,on){
    localStorage[id]=on?"1":"0";
    total.cal+=on?c:-c;
    total.prot+=on?p:-p;
    total.carb+=on?u:-u;
    updateBars();
  };

  function updateBars(){
    calFill.style.width=Math.min(100,total.cal/TARGETS.cal*100)+"%";
    protFill.style.width=Math.min(100,total.prot/TARGETS.prot*100)+"%";
    carbFill.style.width=Math.min(100,total.carb/TARGETS.carb*100)+"%";
    calText.innerText=`${total.cal} / ${TARGETS.cal} –∫–∫–∞–ª`;
    protText.innerText=`${total.prot} / ${TARGETS.prot} –≥ –±–µ–ª–∫–∞`;
    carbText.innerText=`${total.carb} / ${TARGETS.carb} –≥ —É–≥–ª–µ–≤–æ–¥–æ–≤`;
  }
  updateBars();
}
renderMeals();
</script>

</body>
</html>
