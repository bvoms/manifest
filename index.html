<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üî• NewMe ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</title>

<style>
:root{
  --bg:#0e0e11;
  --card:#16161d;
  --text:#eaeaf0;
  --muted:#9a9aa3;
  --accent:#5cff9d;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text)}
header{padding:20px;text-align:center;font-size:24px;font-weight:700}
section{margin:16px;padding:16px;background:var(--card);border-radius:12px}
h2{margin-top:0}
.small{font-size:13px;color:var(--muted)}
.progress{height:10px;background:#000;border-radius:6px;overflow:hidden}
.fill{height:100%;background:var(--accent);width:0%}
button{
  padding:8px 12px;
  margin:4px 4px 0 0;
  background:transparent;
  border:1px solid var(--accent);
  color:var(--accent);
  border-radius:8px;
}
button.active{background:var(--accent);color:#000}
label{display:flex;gap:10px;margin:6px 0;align-items:flex-start}
input{accent-color:var(--accent)}
.meal{margin-bottom:10px}
.meal-title{font-weight:600}
</style>
</head>

<body>

<header>üî• NewMe ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</header>

<section>
  <div class="small" id="dayInfo"></div>
  <div class="small" id="quote"></div>

  <div class="small">–ö–∞–ª–æ—Ä–∏–∏</div>
  <div class="progress"><div class="fill" id="calFill"></div></div>
  <div class="small" id="calText"></div>

  <div class="small">–ë–µ–ª–æ–∫</div>
  <div class="progress"><div class="fill" id="protFill"></div></div>
  <div class="small" id="protText"></div>

  <div class="small">–£–≥–ª–µ–≤–æ–¥—ã</div>
  <div class="progress"><div class="fill" id="carbFill"></div></div>
  <div class="small" id="carbText"></div>
</section>

<section>
<h2>üçö –í—ã–±–æ—Ä –≥–∞—Ä–Ω–∏—Ä–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h2>
<button onclick="setSide('rice')" id="btn-rice">–†–∏—Å</button>
<button onclick="setSide('pasta')" id="btn-pasta">–ú–∞–∫–∞—Ä–æ–Ω—ã</button>
<button onclick="setSide('buckwheat')" id="btn-buckwheat">–ì—Ä–µ—á–∫–∞</button>
</section>

<section>
<h2>üçΩÔ∏è –ü–∏—Ç–∞–Ω–∏–µ (–≥–æ—Ç–æ–≤–∞—è –µ–¥–∞)</h2>
<div id="meals"></div>
</section>

<script>
// ==== –î–ï–ù–¨ ====
const start = localStorage.start || new Date().toISOString();
localStorage.start = start;
const day = Math.floor((Date.now()-new Date(start))/86400000)+1;
dayInfo.innerText = `–î–µ–Ω—å ${day}`;

// ==== –ú–û–¢–ò–í–ê–¶–ò–Ø ====
const quotes=[
  "–ï–¥–∞ = —Ä–æ—Å—Ç",
  "–ù–µ –¥–æ–µ–ª ‚Äî –Ω–µ –≤—ã—Ä–æ—Å",
  "–ú–∞—Å—Å–∞ –ª—é–±–∏—Ç —Å–∏—Å—Ç–µ–º—É",
  "–°–µ–≥–æ–¥–Ω—è —Ç—ã —Å—Ç—Ä–æ–∏—à—å —Ç–µ–ª–æ"
];
const qKey="q"+day;
if(!localStorage[qKey]) localStorage[qKey]=quotes[Math.floor(Math.random()*quotes.length)];
quote.innerText="üß† "+localStorage[qKey];

// ==== –õ–û–ì–ò–ö–ê –î–ù–Ø ====
const isTrainDay = (day-1)%7 < 5;
const TARGETS = isTrainDay
? {cal:3200,prot:130,carb:420}
: {cal:2800,prot:130,carb:300};

// ==== –ì–ê–†–ù–ò–† ====
let side = localStorage.side || "rice";

function setSide(s){
  side = s;
  localStorage.side = s;
  renderButtons();
  renderMeals();
}

function renderButtons(){
  ["rice","pasta","buckwheat"].forEach(s=>{
    document.getElementById("btn-"+s)?.classList.toggle("active", side===s);
  });
}
renderButtons();

// ==== –®–ê–ë–õ–û–ù–´ –ì–ê–†–ù–ò–†–û–í ====
const sides = {
  rice: {name:"—Ä–∏—Å –≤–∞—Ä—ë–Ω—ã–π"},
  pasta: {name:"–º–∞–∫–∞—Ä–æ–Ω—ã –≤–∞—Ä—ë–Ω—ã–µ"},
  buckwheat: {name:"–≥—Ä–µ—á–∫–∞ –≤–∞—Ä—ë–Ω–∞—è"}
};

// ==== –ü–ò–¢–ê–ù–ò–ï ====
function renderMeals(){
  let total={cal:0,prot:0,carb:0};
  meals.innerHTML="";

  const plan = isTrainDay ? [
    {n:"‚òÄÔ∏è –ó–∞–≤—Ç—Ä–∞–∫",t:`${sides[side].name} 300 –≥ + —è–π—Ü–∞ 4 —à—Ç`,c:700,p:30,u:90},
    {n:"üïô –ü–µ—Ä–µ–∫—É—Å",t:`${sides[side].name} 250 –≥ + —è–π—Ü–∞ 2 —à—Ç`,c:500,p:20,u:70},
    {n:"üçõ –û–±–µ–¥",t:`–ö—É—Ä–∏—Ü–∞ 180 –≥ + ${sides[side].name} 350 –≥`,c:800,p:55,u:100},
    {n:"üèãÔ∏è –ü–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π",t:`${sides[side].name} 200 –≥ + —è–π—Ü–∞ 2 —à—Ç`,c:450,p:20,u:60},
    {n:"üß™ –ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",t:`–ì–µ–π–Ω–µ—Ä + –∫—Ä–µ–∞—Ç–∏–Ω`,c:500,p:25,u:80},
    {n:"üåô –£–∂–∏–Ω",t:`–ö—É—Ä–∏—Ü–∞ 150 –≥ + ${sides[side].name} 250 –≥`,c:600,p:45,u:70}
  ] : [
    {n:"‚òÄÔ∏è –ó–∞–≤—Ç—Ä–∞–∫",t:`${sides[side].name} 250 –≥ + —è–π—Ü–∞ 4 —à—Ç`,c:650,p:30,u:80},
    {n:"üïô –ü–µ—Ä–µ–∫—É—Å",t:`${sides[side].name} 200 –≥ + —è–π—Ü–∞ 2 —à—Ç`,c:450,p:20,u:60},
    {n:"üçõ –û–±–µ–¥",t:`–ö—É—Ä–∏—Ü–∞ 180 –≥ + ${sides[side].name} 300 –≥`,c:750,p:55,u:90},
    {n:"üåô –£–∂–∏–Ω",t:`–ö—É—Ä–∏—Ü–∞ 150 –≥ + ${sides[side].name} 250 –≥`,c:700,p:45,u:70}
  ];

  plan.forEach((m,i)=>{
    const id=`meal_${day}_${i}`;
    const checked = localStorage[id]==="1";
    if(checked){
      total.cal+=m.c; total.prot+=m.p; total.carb+=m.u;
    }

    meals.innerHTML+=`
    <div class="meal">
      <label>
        <input type="checkbox" ${checked?"checked":""}
          onchange="toggleMeal('${id}',${m.c},${m.p},${m.u},this.checked)">
        <div>
          <div class="meal-title">${m.n}</div>
          <div class="small">${m.t}</div>
          <div class="small">${m.c} –∫–∫–∞–ª ¬∑ –ë ${m.p} –≥ ¬∑ –£ ${m.u} –≥</div>
        </div>
      </label>
    </div>`;
  });

  window.toggleMeal = function(id,c,p,u,on){
    localStorage[id]=on?"1":"0";
    total.cal+=on?c:-c;
    total.prot+=on?p:-p;
    total.carb+=on?u:-u;
    updateBars();
  };

  function updateBars(){
    calFill.style.width=Math.min(100,total.cal/TARGETS.cal*100)+"%";
    protFill.style.width=Math.min(100,total.prot/TARGETS.prot*100)+"%";
    carbFill.style.width=Math.min(100,total.carb/TARGETS.carb*100)+"%";
    calText.innerText=`${total.cal} / ${TARGETS.cal} –∫–∫–∞–ª`;
    protText.innerText=`${total.prot} / ${TARGETS.prot} –≥ –±–µ–ª–∫–∞`;
    carbText.innerText=`${total.carb} / ${TARGETS.carb} –≥ —É–≥–ª–µ–≤–æ–¥–æ–≤`;
  }
  updateBars();
}

renderMeals();
</script>

</body>
</html>
